---
import ProjectBasicInfo from '@components/ProjectBasicInfo.astro'
import BaseLayout from '@layouts/BaseLayout.astro'
import { Image } from 'astro:assets'
import { getCollection, render } from 'astro:content'

export async function getStaticPaths() {
  const posts = await getCollection('projects')
  return posts.map((project) => {
    const { id } = project

    return {
      params: { id },
      props: { project }
    }
  })
}

const { Content } = await render(Astro.props.project)
const {
  title,
  certificate,
  location_city,
  location_country,
  category,
  client,
  image_cover,
  image_1,
  image_2
} = Astro.props.project.data
---

<BaseLayout
  title={`${title} | SALVIS â€” BREEAM & LEED Certified Buildings`}
  description={`Detailed information about the project ${title}, certified under ${certificate}. Located in ${location_city}, ${location_country}. Client: ${client}.`}
>
  <div class='row justify-content-md-between'>
    <h1 class='text-primary fw-bold'>{title}</h1>

    <div class='col-md-5 d-flex flex-column'>
      <ProjectBasicInfo
        items={[`${certificate}`, `${location_city} - ${location_country}`, `${client}`]}
      />
      <Content />
    </div>
    <div class='col-md-6'>
      <Image
        src={image_cover}
        alt={`Cover photo for project ${title}`}
        layout='constrained'
        width={1200}
        height={1200}
        class='img-fluid flex-grow-1 object-fit-cover w-100 pb-1'
      />
      {
        image_1 && (
          <Image
            src={image_1}
            alt={`Photo of project ${title}`}
            layout='constrained'
            width={1200}
            height={1200}
            class='img-fluid flex-grow-1 object-fit-cover w-100 pb-1'
          />
        )
      }
      {
        image_2 && (
          <Image
            src={image_2}
            alt={`Photo of project ${title}`}
            layout='constrained'
            width={1200}
            height={1200}
            class='img-fluid flex-grow-1 object-fit-cover w-100 pb-1'
          />
        )
      }
    </div>
  </div>
</BaseLayout>
