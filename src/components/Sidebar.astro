---
/* Sidebar.astro — works if used only from .astro pages/layouts (no MDX) */
const pathname = Astro.url.pathname.replace(/\/+$/, '') || '/' // normalize: '/leed/' -> '/leed'
const isActive = (slug: string) => pathname === `/${slug}` || pathname.startsWith(`/${slug}/`)

type Item = { href: string; label: string; slug: string }

/** Optional TODO: allow passing a custom link list (i18n, per-section, etc.) */
const items = [
  { href: '/breeam', label: 'BREEAM', slug: 'breeam' },
  {
    href: '/breeam-pre-logisticke-haly',
    label: 'BREEAM pre logistické haly',
    slug: 'breeam-pre-logisticke-haly'
  },
  { href: '/breeam-in-use', label: 'BREEAM In-Use', slug: 'breeam-in-use' },
  { href: '/leed', label: 'LEED', slug: 'leed' },
  { href: '/leed-om', label: 'LEED O+M', slug: 'leed-om' },
  {
    href: '/dekarbonizacia-existujucich-budov',
    label: 'Dekarbonizácia existujúcich budov',
    slug: 'dekarbonizacia-existujucich-budov'
  },
  { href: '/epd', label: 'EPD', slug: 'epd' },
  { href: '/taxonomia-eu', label: 'Taxonómia EÚ', slug: 'taxonomia-eu' },
  { href: '/simulacie-budov', label: 'Simulácie budov', slug: 'simulacie-budov' }
] as Item[]
---

<nav aria-label='Sidebar'>
  <ul class='nav flex-column mb-auto sticky-top sidebar' id='sidebar'>
    {
      items.map((item, i) => {
        const active = isActive(item.slug)
        return (
          <li class={`nav-item border-bottom${i === items.length - 1 ? '' : ''}`}>
            <a
              href={item.href}
              class={`nav-link ps-0 rounded-0 ${active ? 'active' : 'link-dark'}`}
              aria-current={active ? 'page' : undefined}
            >
              {item.label}
            </a>
          </li>
        )
      })
    }
  </ul>
</nav>

<style>
  #sidebar {
    top: 6.9rem;
  }
  .nav-link {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }
  .nav-item {
    transition: background-color 0.25s ease;
  }
  .nav-item:hover {
    background-color: var(--bs-light);
  }
</style>
